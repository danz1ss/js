<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Промокод</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #c5d3e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .promo-container {
            background: white;
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .promo-input {
            border: 2px solid #ddd;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 16px;
            width: 300px;
            outline: none;
        }
        
        .promo-input:focus {
            border-color: #5b9bd5;
        }
        
        .promo-button {
            background: #5b9bd5;
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .promo-button:hover {
            background: #4a8bc4;
        }
        
        .success-message {
            margin-top: 15px;
            color: #4CAF50;
            font-size: 16px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div>
        <form class="promo-container" id="promoForm">
            <input 
                type="text" 
                class="promo-input" 
                id="promoInput" 
                placeholder="ПРОМОКОД"
                required
            >
            <button type="submit" class="promo-button">Применить</button>
        </form>
        <div class="success-message" id="message"></div>
    </div>
    
    <script>
        const promocodeArr = [
            {
                promocode: 'PROM10',
                gift: "Скидка 10%"
            },
            {
                promocode: 'PROM50',
                gift: "Скидка 50%"
            },
            {
                promocode: 'GIFT',
                gift: "Подарок в корзине"
            }
        ];
        
        const promoForm = document.getElementById('promoForm');
        const promoInput = document.getElementById('promoInput');
        const message = document.getElementById('message');
        
        // Вспомогательная функция для получения данных из куки
        function getCookie() {
            return document.cookie.split('; ').reduce((acc, item) => {
                const [name, value] = item.split('=');
                acc[name] = value;
                return acc;
            }, {});
        }
        
        // Функция для установки cookie
        function setCookie(name, value, days = 7) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = `${name}=${value};expires=${date.toUTCString()};path=/`;
        }
        
        // Функция активации промокода
        function activatePromocode(promo) {
            promoInput.value = promo.promocode;
            promoInput.disabled = true;
            message.textContent = `Промокод активирован! ${promo.gift}`;
        }
        
        // Проверка сохраненного промокода при загрузке
        window.addEventListener('load', function() {
            const cookie = getCookie();
            if (cookie.promocode && cookie.gift) {
                activatePromocode({
                    promocode: cookie.promocode,
                    gift: decodeURIComponent(cookie.gift)
                });
            }
        });
        
        // Обработка отправки формы
        promoForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const inputValue = promoInput.value.trim().toUpperCase();
            const foundPromo = promocodeArr.find(item => item.promocode === inputValue);
            
            if (foundPromo) {
                // Сохраняем в cookie
                setCookie('promocode', foundPromo.promocode);
                setCookie('gift', encodeURIComponent(foundPromo.gift));
                
                // Активируем промокод
                activatePromocode(foundPromo);
            } else {
                // Сбрасываем форму
                promoInput.value = '';
                message.textContent = '';
            }
        });
    </script>
</body>
</html>